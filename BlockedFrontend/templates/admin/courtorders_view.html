{% extends "admin.page.html" %}
{% import "paging.part.html" as paging %}
{% import "forms.part.html" as forms %}

{% set pagetitle = "Court Order Admin" %}

{% block body %}
<div class="row">
  <div class="col-md-6">

    <h1>{{pagetitle}}</h1>
    <h2>{{ judgment.name }}</h2>
  </div>

</div>

{% macro field(label,name,obj,type='text') %}
<div>
    <strong>{{label}}: </strong>
    {% if type == 'text' %}
    <span>{{obj[name]|null}}</span>
    {% elif type == 'url' and obj[name] != None %}
    <span><a href="{{obj[name]}}" target="_blank">{{obj[name]}}</a></span>
    {% endif %}
</div>
{% endmacro %}

{% macro display(s) %}
{{ s|replace('_',' ')|title }}
{% endmacro %}

<div class="row">
    <div class="col-md-12">

        {{ field('Citation','citation',judgment) }}
        {{ field('Judgment URL','judgment_url',judgment,'url') }}
        {{ field('Wiki URL','url',judgment,'url') }}
        {{ field('Date','date',judgment) }}
        {{ field('Case number','case_number',judgment) }}
        {{ field('Restriction type','restriction_type',judgment) }}
        {{ field('Instruction type','instruction_type',judgment) }}
        {{ field('Jurisdiction','jurisdiction',judgment) }}
        {{ field('Court/authority','court_authority',judgment) }}
        {{ field('Injunction obtained by','injunction_obtained_by',judgment) }}
        {{ field('Injunction represented by','injunction_represented_by',judgment) }}

        <div class="row">
            <div class="col-md-6">
        <h3>Additional Information</h3>
        <h4>Other court documents</h4>
        <div>{{judgment.other_docs|null|safe}}</div>
        <h4>Sites targeted</h4>
        <div>{{judgment.sites_description|null|safe}}</div>
            </div>
            <div class="col-md-6">
        <h3>Court Orders</h3>
                <ul>
        {% for order in orders %}
                <li>{{ order.network_name }} <a href="{{order.url}}" target="_blank">{{ order.url }}</a></li>
        {% endfor %}
                </ul>
            </div>
        </div>

        <h2>Targeted sites</h2>
        <div class="row">
            <div class="col-md-6">
                <form method="POST" action="{{url_for('.courtorders_site_group')}}">
                    <ul>
                    {% for site in sites %}
                        <li><input type="checkbox" name="site_id" value="{{site.id}}" /> {{site.url}}</li>
                    {% endfor %}
                    </ul>
                    <div class="row">
                        <div class="col-md-6">
                            <input type="hidden" name="judgment_id" value="{{judgment.id}}" />
                            {{forms.select_field('Add to Group','group_id', None, groups) }}
                            <input type="submit" class="btn btn-primary btn-sm" value="Add selected sites to group" />
                        </div>
                    </div>
                </form>
            </div>

            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-12 well">
                        <form class="form form-inline" method="POST" action="{{url_for('.courtorders_site_add')}}">
                            <legend>Add site</legend>
                            <input type="hidden" name="judgment_id" value="{{judgment.id}}" />
                            <label for="url">URL:</label>
                            <div class="control-group">
                                <input class="form-control" type="text" name="url" />
                                <input class="btn btn-default" type="submit" value="Add" />
                            </div>
                        </form>
                    </div>
                </div>
                <div class="row" style="margin-top: 2em">
                    <div class="col-md-12 well">
                        <form class="form form-inline" method="POST" action="{{url_for('.courtorders_group_add')}}">
                            <legend>Add Group</legend>
                            <input type="hidden" name="judgment_id" value="{{judgment.id}}" />
                            <label for="url">Name:</label>
                            <div class="control-group">
                                <input class="form-control" type="text" name="name" />
                                <input class="btn btn-default" type="submit" value="Add" />
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}



